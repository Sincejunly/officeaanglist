<!DOCTYPE html>
<html>
<head>
    <title>User List</title>
    <style>
        .user-row {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 5px;
        }

        /* .user-details {
            display: none;
            padding: 10px;
            background-color: #f0f0f0;
        } */

        /* CSS to display .user-details when the parent .user-row is being hovered */
        /* .user-row:hover .user-details {
            display: block;
        } */
    </style>
</head>
<body>
    <div id="user-list"></div>
    <!-- <div class="user-row">
         <div>
            <strong>User ID:</strong> <span class="user-id">1</span>
            <strong>Username:</strong> user1
            <strong>Password:</strong> ********
        </div>
        <button onclick="toggleDetails(this)">Toggle Details</button>
        <div class="user-details" id="user-details-1" style="display: none;">
            <form>
                <label for="new-username">New Username:</label>
                <input type="text" id="new-username" name="new-username">

                <label for="new-password">New Password:</label>
                <input type="password" id="new-password" name="new-password">

                <label for="confirm-password">Confirm Password:</label>
                <input type="password" id="confirm-password" name="confirm-password">

                <button type="button" onclick="saveDetails(this)">Save</button>
            </form>
        </div> 
    </div> -->

    <!-- Add more user rows here -->

    <script>
        var users = 
        {
            1:{
                id: 1,
                username: "user1",
                password: "password123"
            },
            2:{
                id: 2,
                username: "user1",
                password: "password123"
            }
        };
        
        function getUserId(button) {
            var userRow = button.closest(".user-row");
            var userIdElement = userRow.querySelector(".user-id");
            var userId = userIdElement ? userIdElement.textContent : null;
            return userId;
        }

        function toggleDetails(button) {
            var userId = getUserId(button);

            if (userId !== null) {
                var userDetails = document.getElementById("user-details-" + userId);
                var computedStyle = window.getComputedStyle(userDetails);

                if (computedStyle.display === "none") {
                    userDetails.style.display = "block";
                } else {
                    userDetails.style.display = "none";
                }
            }
        }

        function saveDetails(button) {
            var userId = getUserId(button);
            var newUsername = document.getElementById("new-username").value;
            var newPassword = document.getElementById("new-password").value;
            var confirmPassword = document.getElementById("confirm-password").value;

            if (newPassword === confirmPassword) {
                // Perform the save operation or any other action with the new username and password here.
                console.log("User ID: " + userId);
                console.log("New Username: " + newUsername);
                console.log("New Password: " + newPassword);
            } else {
                alert("Passwords do not match. Please try again.");
            }

            // Clear the form fields after saving
            document.getElementById("new-username").value = "";
            document.getElementById("new-password").value = "";
            document.getElementById("confirm-password").value = "";

            // Hide the details after saving
            var userDetails = document.getElementById("user-details-" + userId);
            userDetails.style.display = "none";
        }

        function addUserRow(user) {
            var userList = document.getElementById("user-list");

            // Create the new user row element
            var newUserRow = document.createElement("div");
            newUserRow.classList.add("user-row");

            // Fill in the content for the new user row
            newUserRow.innerHTML = `
                <div>
                    <strong>User ID:</strong> <span class="user-id">${user['id']}</span>
                    <strong>Username:</strong> ${user['username']}
                    <strong>Password:</strong> <div id="password-${user['id']}" 
                    onmouseover="showPassword(this)" onmouseout="hidePassword(this)" style="display: inline-block; vertical-align: middle;">***********</div>
                </div>
                <button onclick="toggleDetails(this)">Toggle Details</button>
                <div class="user-details" id="user-details-${user['id']}" style="display: none;">
                    <form>
                        <label for="new-username-${user['id']}">New Username:</label>
                        <input type="text" id="new-username-${user['id']}" name="new-username">

                        <label for="new-password-${user['id']}">New Password:</label>
                        <input type="password" id="new-password-${user['id']}" name="new-password">

                        <label for="confirm-password-${user['id']}">Confirm Password:</label>
                        <input type="password" id="confirm-password-${user['id']}" name="confirm-password">

                        <button type="button" onclick="saveDetails(this)">Save</button>
                    </form>
                </div>
     
            `;

            // Append the new user row to the user list container
            userList.appendChild(newUserRow);
    }
    function showPassword(container) {
        var userId = getUserId(container);
        container.textContent = users[userId]['password'];

    }

    function hidePassword(container) {
        var userId = getUserId(container);
   
        var hiddenPassword = "*".repeat(users[userId]['password'].length);
        container.textContent = hiddenPassword;

    }
    addUserRow(users[1]);
    addUserRow(users[2]);
    </script>
</body>
</html>
